with Ada.Real_Time; use Ada.Real_Time;
with devicesfss_v1; use devicesfss_v1;

package Testing_2 is

    ---------------------------------------------------------------------
    ------ Access time for devices
    ---------------------------------------------------------------------
    WCET_Distance: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);
    WCET_Light: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);
    
    WCET_Joystick: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);
    WCET_PilotPresence: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);
    WCET_PilotButton: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);
    
    WCET_Power: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(4);
    
    WCET_Speed: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(7);
    WCET_Altitude: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(18);

    WCET_Pitch: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(20);
    WCET_Roll: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(18);

    WCET_Display: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(15);
    WCET_Alarm: constant Ada.Real_Time.Time_Span := Ada.Real_Time.Milliseconds(5);

    ---------------------------------------------------------------------
    ------ SCENARIO ----------------------------------------------------- 
    ---------------------------------------------------------------------
    -- Initial_Altitude: Altitude_Samples_Type := 8000;
    
    ---------------------------------------------------------------------
    ------ DISTANCE OK---------------------------------------------------
    cantidad_datos_Distancia: constant := 200;
    type Indice_Secuencia_Distancia is mod cantidad_datos_Distancia;
    type tipo_Secuencia_Distancia is array (Indice_Secuencia_Distancia) of Distance_Samples_Type;

    Distance_Simulation: tipo_Secuencia_Distancia :=  -- next sample every 100ms.
(
    -- 0–3s: Estado normal > 5000 m
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 1s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 2s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 3s
    -- 4–5s: Objeto detectado (4800 m)
    4800,4800,4800,4800,4800, 4800,4800,4800,4800,4800,   -- 4s
    4800,4800,4800,4800,4800, 4800,4800,4800,4800,4800,   -- 5s
    -- 6s: Objeto próximo (2300 m)
    2300,2300,2300,2300,2300, 2300,2300,2300,2300,2300,   -- 6s
    -- 7s: Riesgo de colisión (<1000 m)
    900,900,900,900,900, 900,900,900,900,900,             -- 7s
    -- 8–9s: Colisión prolongada (< 1000 m)
    850,850,850,850,850, 850,850,850,850,850,             -- 8s
    850,850,850,850,850, 850,850,850,850,850,             -- 9s
    -- 10s: Últimas muestras críticas <1000
    900,900,900,900,900, 900,900,900,900,900,             -- 10s
    -- 11–20s: Recuperación (>5000 m)
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 11s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 12s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 13s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 14s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 15s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 16s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 17s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 18s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555,   -- 19s
    5555,5555,5555,5555,5555, 5555,5555,5555,5555,5555    -- 20s
);

                   
    ---------------------------------------------------------------------
    ------ LIGHT OK------------------------------------------------------

    cantidad_datos_Light: constant := 200;
    type Indice_Secuencia_Light is mod cantidad_datos_Light;
    type tipo_Secuencia_Light is array (Indice_Secuencia_Light) of Light_Samples_Type;

    Light_Intensity_Simulation: tipo_Secuencia_Light :=  -- 1 muestra cada 100ms
(
   -- 1s
   700,700,700,700,700, 700,700,700,700,700,
   -- 2s
   700,700,700,700,700, 700,700,700,700,700,
   -- 3s
   700,700,700,700,700, 700,700,700,700,700,
   -- 4s
   700,700,700,700,700, 700,700,700,700,700,
   -- 5s
   700,700,700,700,700, 700,700,700,700,700,

   -- 6s (luz crítica)
   200,200,200,200,200, 200,200,200,200,200,
   -- 7s (luz crítica)
   200,200,200,200,200, 200,200,200,200,200,

   -- 8s
   700,700,700,700,700, 700,700,700,700,700,
   -- 9s
   700,700,700,700,700, 700,700,700,700,700,
   -- 10s
   700,700,700,700,700, 700,700,700,700,700,

   -- 11s
   700,700,700,700,700, 700,700,700,700,700,
   -- 12s
   700,700,700,700,700, 700,700,700,700,700,

   -- 13s (crítica)
   200,200,200,200,200, 200,200,200,200,200,
   -- 14s (crítica)
   200,200,200,200,200, 200,200,200,200,200,

   -- 15s
   700,700,700,700,700, 700,700,700,700,700,
   -- 16s
   700,700,700,700,700, 700,700,700,700,700,
   -- 17s
   700,700,700,700,700, 700,700,700,700,700,
   -- 18s
   700,700,700,700,700, 700,700,700,700,700,
   -- 19s
   700,700,700,700,700, 700,700,700,700,700,

   -- 20s (aquí faltaban 10 valores → ahora corregidos)
   700,700,700,700,700, 700,700,700,700,700
);





    ---------------------------------------------------------------------
    ------ JOYSTICK OK---------------------------------------------------

    cantidad_datos_Joystick: constant := 200;
    type Indice_Secuencia_Joystick is mod cantidad_datos_Joystick;
    type tipo_Secuencia_Joystick is array (Indice_Secuencia_Joystick) 
                                             of Joystick_Samples_Type;

    Joystick_Simulation: tipo_Secuencia_Joystick :=
(
   -- 1s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 2s
   (+02,+01),(+03,+02),(+04,+01),(+05,+00),(+04,-01),
   (+03,-02),(+02,-01),(+03,+00),(+04,+01),(+05,+02),

   -- 3s
   (+03,+01),(+02,+00),(+01,+01),(+02,+02),(+03,+01),
   (+02,+00),(+01,-01),(+02,-02),(+03,-01),(+02,+00),

   -- 4s
   (+03,+02),(+02,+01),(+01,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 5s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 6s
   (+01,+01),(+02,+02),(+03,+03),(+02,+02),(+01,+01),
   ( 0 , 0 ),(-01,-01),(-02,-02),(-01,-01),( 0 , 0 ),

   -- 7s
   (+05,+03),(+04,+02),(+03,+01),(+02,+00),(+03,+01),
   (+04,+02),(+05,+03),(+04,+02),(+03,+01),(+02,+00),

   -- 8s
   (+01,+02),(+02,+03),(+03,+04),(+02,+03),(+01,+02),
   ( 0 ,+01),(-01, 0 ),(-02,-01),(-01,-02),( 0 ,-01),

   -- 9s
   (+03,+01),(+02,+00),(+01,-01),( 0 ,-02),(+01,-01),
   (+02,+00),(+03,+01),(+02,+00),(+01,-01),( 0 ,-02),

   -- 10s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 11s
   (+02,+01),(+03,+02),(+04,+01),(+05,+00),(+04,-01),
   (+03,-02),(+02,-01),(+03,+00),(+04,+01),(+05,+02),

   -- 12s
   (+03,+01),(+02,+00),(+01,+01),(+02,+02),(+03,+01),
   (+02,+00),(+01,-01),(+02,-02),(+03,-01),(+02,+00),

   -- 13s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 14s
   (+01,+01),(+02,+02),(+03,+03),(+02,+02),(+01,+01),
   ( 0 , 0 ),(-01,-01),(-02,-02),(-01,-01),( 0 , 0 ),

   -- 15s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 16s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 17s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 18s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 19s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01),

   -- 20s
   (+05,+02),(+04,+01),(+03,+00),(+02,+01),(+03,+02),
   (+04,+01),(+05,+00),(+04,-01),(+03,-02),(+02,-01)
);





                 
    ---------------------------------------------------------------------
    ------ POWER OK------------------------------------------------------
    cantidad_datos_Power: constant := 200;
    type Indice_Secuencia_Power is mod cantidad_datos_Power;
    type tipo_Secuencia_Power is array (Indice_Secuencia_Power) of Power_Samples_Type;

    Power_Simulation: tipo_Secuencia_Power :=
(
   -- 1s: Velocidad normal (sin alarmas)
   700,700,700,700,700, 700,700,700,700,700,
   -- 2s: Velocidad baja (simula vuelo lento)
   300,300,300,300,300, 300,300,300,300,300,
   -- 3s: Velocidad alta pero segura (sin colisión)
   850,850,850,850,850, 850,850,850,850,850,
   -- 4s: Velocidad alta + necesaria para activar primera alarma si distancia baja
   900,900,900,900,900, 900,900,900,900,900,
   -- 5s: Velocidad extrema (sistema debe limitar a 1000)
   950,950,950,950,950, 950,950,950,950,950,
   -- 6s: Velocidad normal nuevamente
   700,700,700,700,700, 700,700,700,700,700,
   -- 7s: Velocidad baja otra vez (comprobación de estabilidad)
   250,250,250,250,250, 250,250,250,250,250,
   -- 8s: Velocidad muy alta para activar desvío si distancia lo requiere
   980,980,980,980,980, 980,980,980,980,980,
   -- 9s: Velocidad segura estable
   600,600,600,600,600, 600,600,600,600,600,
   -- 10s: Velocidad máxima estable dentro de rango normal
   800,800,800,800,800, 800,800,800,800,800,
   -- 11s: Velocidad baja para ver combinación con falta de visibilidad
   200,200,200,200,200, 200,200,200,200,200,
   -- 12s: Velocidad alta (combinación con piloto ausente)
   900,900,900,900,900, 900,900,900,900,900,
   -- 13s–20s: Patrón repetido mezclando normal + alta
   700,700,700,700,700, 700,700,700,700,700,   -- 13s
   850,850,850,850,850, 850,850,850,850,850,   -- 14s
   950,950,950,950,950, 950,950,950,950,950,   -- 15s
   600,600,600,600,600, 600,600,600,600,600,   -- 16s
   300,300,300,300,300, 300,300,300,300,300,   -- 17s
   900,900,900,900,900, 900,900,900,900,900,   -- 18s
   800,800,800,800,800, 800,800,800,800,800,   -- 19s
   700,700,700,700,700, 700,700,700,700,700    -- 20s
);

    ---------------------------------------------------------------------
    ------ PILOT'S PRESENCE ---------------------------------------------

    cantidad_datos_PilotPresence: constant := 200;
    type Indice_Secuencia_PilotPresence is mod cantidad_datos_PilotPresence;
    type tipo_Secuencia_PilotPresence is array (Indice_Secuencia_PilotPresence) of PilotPresence_Samples_Type;

    PilotPresence_Simulation: tipo_Secuencia_PilotPresence :=
(
   -- 1s: Piloto presente (comportamiento normal)
   1,1,1,1,1, 1,1,1,1,1,

   -- 2s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 3s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 4s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 5s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 6s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 7s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 8s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 9s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -- 10s: Normal
   1,1,1,1,1, 1,1,1,1,1,

   -------------------------------------------------------------------
   -- 11s–13s: PILOTO AUSENTE → activa alarmas anticipadas
   -------------------------------------------------------------------
   0,0,0,0,0, 0,0,0,0,0,   -- 11s: ausencia total  
   0,0,0,0,0, 0,0,0,0,0,   -- 12s: se mantiene
   0,0,0,0,0, 0,0,0,0,0,   -- 13s: aún ausente

   -------------------------------------------------------------------
   -- 14s–20s: Piloto vuelve → sistema vuelve a normalidad
   -------------------------------------------------------------------
   1,1,1,1,1, 1,1,1,1,1,   -- 14s
   1,1,1,1,1, 1,1,1,1,1,   -- 15s
   1,1,1,1,1, 1,1,1,1,1,   -- 16s
   1,1,1,1,1, 1,1,1,1,1,   -- 17s
   1,1,1,1,1, 1,1,1,1,1,   -- 18s
   1,1,1,1,1, 1,1,1,1,1,   -- 19s
   1,1,1,1,1, 1,1,1,1,1    -- 20s
);
       
    ---------------------------------------------------------------------
    ------ PILOT'S BUTTON -----------------------------------------------

    cantidad_datos_PilotButton: constant := 200;
    type Indice_Secuencia_PilotButton is mod cantidad_datos_PilotButton;
    type tipo_Secuencia_PilotButton is array (Indice_Secuencia_PilotButton) of PilotButton_Samples_Type;

    PilotButton_Simulation: tipo_Secuencia_PilotButton :=
(
   -- 1s: sin pulsaciones
   0,0,0,0,0, 0,0,0,0,0,

   -- 2s: sin pulsaciones
   0,0,0,0,0, 0,0,0,0,0,

   -- 3s: sin pulsaciones
   0,0,0,0,0, 0,0,0,0,0,

   -- 4s: sin pulsaciones
   0,0,0,0,0, 0,0,0,0,0,

   -- 5s: sin pulsaciones
   0,0,0,0,0, 0,0,0,0,0,

   --------------------------------------------------------------------
   -- 6–8s: sigue sin pulsarse (modo automático)
   --------------------------------------------------------------------
   0,0,0,0,0, 0,0,0,0,0,   -- 6s
   0,0,0,0,0, 0,0,0,0,0,   -- 7s
   0,0,0,0,0, 0,0,0,0,0,   -- 8s

   --------------------------------------------------------------------
   -- 9s: PRIMER PULSO → pasar a MANUAL
   --------------------------------------------------------------------
   0,0,1,1,1, 0,0,0,0,0,   -- 9s (flanco 0→1→0)

   -- 10s: sin pulsaciones (modo manual)
   0,0,0,0,0, 0,0,0,0,0,

   --------------------------------------------------------------------
   -- 11–13s: piloto ausente PERO seguimos en MANUAL (comprobación R6.3)
   --------------------------------------------------------------------
   0,0,0,0,0, 0,0,0,0,0,   -- 11s
   0,0,0,0,0, 0,0,0,0,0,   -- 12s
   0,0,0,0,0, 0,0,0,0,0,   -- 13s

   --------------------------------------------------------------------
   -- 14s: SEGUNDO PULSO → volver a AUTOMÁTICO
   --------------------------------------------------------------------
   0,0,1,1,1, 0,0,0,0,0,   -- 14s

   -- 15–20s: sin pulsaciones (modo automático activo)
   0,0,0,0,0, 0,0,0,0,0,   -- 15s
   0,0,0,0,0, 0,0,0,0,0,   -- 16s
   0,0,0,0,0, 0,0,0,0,0,   -- 17s
   0,0,0,0,0, 0,0,0,0,0,   -- 18s
   0,0,0,0,0, 0,0,0,0,0,   -- 19s
   0,0,0,0,0, 0,0,0,0,0    -- 20s
);

end Testing_2;





